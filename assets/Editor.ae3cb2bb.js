import{_ as e}from"./NotesEditor.c372eb19.js";import{_ as a,a as o,c as l}from"./index.4762e9dd.js";import{_ as t,a as s}from"./Editor.0caab758.js";import{_ as n,b as r,s as d,f as i}from"./editor.def67cbb.js";import{d as c,b as u}from"./index.94396766.js";import{a as p}from"./EditorCard.2e183f84.js";import{e as v,d as m,O as k,x as h,y as f,o as b,h as x,F as V,z as y,n as g,j as _,G as j,H as C,k as E,A as U,r as w,N as B,w as z,i as I,I as O,P as S}from"./vendor.c8bf7c27.js";import"./index.cbab1530.js";import"./file-manager.9a2fdd9a.js";var T=v({name:"TranslationEditor",props:{modelValue:{type:Object,default:void 0}},emits:["update:modelValue"],setup(e,{emit:a}){const o=m({get:()=>e.modelValue,set:e=>a("update:modelValue",e)}),l=k("contextSource",{});return{translation:o,context:l,create:function(){(null==l?void 0:l.value)&&(o.value=l.value.reduce(((e,{entity:a})=>(e[a]={},e)),{}))},getSize:function(e,a){var l,t;if(!o.value)return;const s=null!=(t=null==(l=o.value[e][a])?void 0:l.length)?t:0;return s>0?s:a.length}}}});const N=U();h("data-v-714d24bd");const A={class:"text-caption"},F={class:"row wrap"};f();const G=N(((e,a,o,l,t,s)=>{const r=n,d=c,i=p;return b(),x(i,{icon:"list_alt",header:"context translation"},{header:N((()=>[e.translation?(b(),x(r,{key:0,onConfirm:a[1]||(a[1]=a=>e.translation=void 0)})):(b(),x(d,{key:1,icon:"add",onClick:e.create},null,8,["onClick"]))])),default:N((()=>[e.translation?(b(!0),x(V,{key:0},y(e.context,(({entity:a,tags:o},l)=>(b(),x("div",{key:a,class:["col","colored-dot-"+l]},[g("h2",A,_(a),1),g("div",F,[(b(!0),x(V,null,y(o,(o=>j((b(),x("input",{key:o,"onUpdate:modelValue":l=>e.translation[a][o]=l,size:e.getSize(a,o),placeholder:o,type:"text"},null,8,["onUpdate:modelValue","size","placeholder"])),[[C,e.translation[a][o]]]))),128))])],2)))),128)):E("",!0)])),_:1})}));T.render=G,T.__scopeId="data-v-714d24bd";var H=v({components:{VContext:a,Block:o,BlocksOrderEditor:t,BlockEditor:s,ContextTranslationEditor:T},setup(){r({default:{},filename:"phrasebook"});const e=w([]);d.getItem("phrasebookCorpus").then((async a=>{e.value=a||await u("phrasebookCorpus")}));const a=w(void 0),o=w(void 0),t=w({}),s=w(void 0),n=m((()=>{var e;return null==(e=o.value)?void 0:e.context})),c=w({});return B("contextSource",n),B("context",c),z(n,(e=>l(c,e))),z(e,(e=>a.value=e[e.length-1])),z(a,(e=>{(null==e?void 0:e.phrases)&&(o.value=e.phrases[e.phrases.length-1])})),z([o,i],(([e])=>{e&&i.value&&(i.value[e.id]||(i.value[e.id]={blocks:[]}),t.value=i.value[e.id])})),z(t,(e=>{var a;return s.value=null==(a=null==e?void 0:e.blocks)?void 0:a[e.blocks.length-1]})),{file:i,corpus:e,section:a,phrase:o,translation:t,block:s}}});const P=U();h("data-v-5436a7a9");const Y={key:0,class:"section col-2 small grid"},q={class:"col-2"},D={class:"col"},J={class:"col"},K={class:"row"},L=g("p",{class:"icon"},"topic",-1),M={class:"col flex"},Q={key:0,class:"row"},R=g("p",{class:"icon"},"short_text",-1),W=g("hr",null,null,-1),X=S(" You can add notes, for example, to explain certain grammatical rules. ");f();const Z=P(((a,o,l,t,s,n)=>{var r,d;const i=I("VContext"),c=I("Block"),u=I("BlocksOrderEditor"),p=e,v=I("ContextTranslationEditor"),m=I("BlockEditor");return a.file&&a.corpus?(b(),x("div",Y,[g("div",q,[g("div",D,[g("div",J,[g("div",K,[L,g("h2",M,[j(g("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>a.section=e)},[(b(!0),x(V,null,y(a.corpus,(e=>(b(),x("option",{key:e.name,value:e},_(e.name),9,["value"])))),128))],512),[[O,a.section]])])]),a.section?(b(),x("div",Q,[R,j(g("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>a.phrase=e)},[(b(!0),x(V,null,y(a.section.phrases,(e=>(b(),x("option",{key:e.id,value:e},_(e.name),9,["value"])))),128))],512),[[O,a.phrase]])])):E("",!0)]),W,g(i),a.phrase?(b(),x("div",{key:a.phrase.id,class:"row wrap flex"},[(b(!0),x(V,null,y(a.phrase.blocks,((e,a)=>(b(),x(c,{key:a,block:e},null,8,["block"])))),128))])):E("",!0)]),a.translation?(b(),x(V,{key:0},[g(u,{key:null==(r=a.phrase)?void 0:r.id,modelValue:a.block,"onUpdate:modelValue":o[3]||(o[3]=e=>a.block=e),phrase:a.translation,"onUpdate:phrase":o[4]||(o[4]=e=>a.translation=e)},null,8,["modelValue","phrase"]),g(p,{modelValue:a.translation.notes,"onUpdate:modelValue":o[5]||(o[5]=e=>a.translation.notes=e)},{default:P((()=>[X])),_:1},8,["modelValue"]),g(v,{modelValue:a.translation.context,"onUpdate:modelValue":o[6]||(o[6]=e=>a.translation.context=e)},null,8,["modelValue"])],64)):E("",!0)]),a.block?(b(),x(m,{key:null==(d=a.phrase)?void 0:d.id,modelValue:a.block,"onUpdate:modelValue":o[7]||(o[7]=e=>a.block=e)},null,8,["modelValue"])):E("",!0)])):E("",!0)}));H.render=Z,H.__scopeId="data-v-5436a7a9";export default H;
