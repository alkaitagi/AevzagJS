import{d as e,S as a,c as t,b as l}from"./index.83ad09dd.js";import{e as n,o as s,h as u,l as i,d as o,r as c,w as v,t as r}from"./vendor.c8bf7c27.js";import{u as f,d}from"./file-manager.9a2fdd9a.js";var m=n({props:{message:{type:String,default:"Delete?"},icon:{type:String,default:"delete"},text:{type:String,default:""}},emits:["confirm"],setup:(e,{emit:a})=>({confirm:function(){window.confirm(e.message)&&a("confirm")}})});m.render=function(a,t,l,n,i,o){const c=e;return s(),u(c,{class:{"highlight-font-alert":"delete"===a.icon},icon:a.icon,text:a.text,onClick:a.confirm},null,8,["class","icon","text","onClick"])};const p=i.createInstance({name:"editor"}),g=new a(p),w=o((()=>g.updateOf(O.value))),S=o((()=>y.value&&w.value&&w.value<t.updateOf(O.value))),y=c();v(y,(()=>p.setItem("lect",r(y.value)).then((()=>N()))));const x=c();let I;const O=o((()=>{let e=b.value.filename+".json";return b.value.global||(e=(r(y.value)||"_")+"/"+e),e}));function h(){p.setItem(O.value,r(x.value)),g.update(O.value)}const b=c({default:void 0,filename:""});async function j(e){var a;null==I||I(),I=void 0,x.value=void 0,b.value=e,void 0===y.value?y.value=null!=(a=await p.getItem("lect"))?a:"":await N()}function J(){}async function N(e=!0){let a;null==I||I(),I=void 0,console.log("resetting",O.value),e&&(a=await p.getItem(O.value))?(x.value=a,await l(O.value)):((a=await l(O.value))?x.value=a:x.value=JSON.parse(JSON.stringify(b.value.default)),g.delete(O.value),await p.removeItem(O.value)),I||(I=v(x,h,{deep:!0}))}function k(){f((e=>x.value=JSON.parse(e)))}function C(){d(JSON.stringify(x.value,null,2),O.value)}export{m as _,S as a,j as b,b as c,C as d,x as f,w as i,y as l,J as p,N as r,p as s,k as u};
