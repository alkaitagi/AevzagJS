import{_ as e,a as t}from"./EditorCard.2e183f84.js";import{d as a}from"./index.94396766.js";import{_ as o,a as l,n as s,b as n}from"./index.4762e9dd.js";import{e as d,d as i,x as r,y as c,i as u,o as p,h as m,n as k,F as v,z as f,k as b,A as V,O as y,r as g,w as h,j as x,Q as w,G as C,H as _}from"./vendor.c8bf7c27.js";var O=d({name:"OrderEditor",components:{Context:o,Block:l},props:{modelValue:{type:Array,default:void 0},phrase:{type:Object,default:void 0}},emits:["update:modelValue","update:phrase"],setup(e,{emit:t}){const a=i({get:()=>e.modelValue,set:e=>t("update:modelValue",e)}),o=i({get:()=>e.phrase,set:e=>t("update:modelValue",e)}),l=i({get:()=>o.value.blocks,set:e=>o.value.blocks=e});return{mphrase:o,blocks:l,block:a,newState:s}}});const S=V();r("data-v-4e9f8dde");const A={class:"row-1 wrap blocks"};c();const E=S(((o,l,s,n,d,i)=>{const r=e,c=u("Context"),V=a,y=u("Block"),g=t;return o.mphrase?(p(),m(g,{key:0,icon:"widgets",header:"Blocks"},{header:S((()=>[k(r,{modelValue:o.blocks,"onUpdate:modelValue":l[1]||(l[1]=e=>o.blocks=e),item:o.block,"onUpdate:item":l[2]||(l[2]=e=>o.block=e),add:()=>[o.newState()],copy:"",shift:"",remove:""},null,8,["modelValue","item","add"])])),default:S((()=>[k(c,{translation:o.phrase.id?null:o.phrase.context},null,8,["translation"]),k("div",A,[(p(!0),m(v,null,f(o.blocks,((e,t)=>(p(),m("div",{key:t+"--"+Math.random(),class:"row"},[k(V,{icon:"edit","is-on":o.block===e,onClick:t=>o.block=e},null,8,["is-on","onClick"]),k(y,{block:e},null,8,["block"])])))),128))])])),_:1})):b("",!0)}));O.render=E,O.__scopeId="data-v-4e9f8dde";var U=d({name:"ConditionsEditor",props:{modelValue:{type:Object,default:void 0}},emits:["update:modelValue"],setup(e,{emit:t}){const a=y("contextSource",{}),o=i({get:()=>e.modelValue,set:e=>t("update:modelValue",e)}),l=g([]);return h([a,o],(([e,t])=>{e&&(l.value=e.flatMap((({entity:e,tags:a},o)=>a.map((a=>{var l;const s=null==(l=null==t?void 0:t[e])?void 0:l[a];return{tag:a,entity:e,color:"colored-dot-"+o,select:void 0===s?"false":(s?"":"alt-")+"true",flag:s}})))))}),{immediate:!0,deep:!0}),{context:a,conditions:o,tags:l,toggle:function(e){var t;if(!l.value)return;const{flag:a,entity:s,tag:n}=l.value[e],d=null!=(t=o.value)?t:{};void 0===a?(d[s]||(d[s]={}),d[s][n]=!0):a?d[s][n]=!1:(delete d[s][n],Object.keys(d[s]).length||delete d[s]),o.value=d}}}});const j=V();r("data-v-30afbc72");const B={class:"row wrap"};c();const M=j(((e,o,l,s,n,d)=>{const i=a,r=t;return p(),m(r,{icon:"tune",header:"conditions"},{header:j((()=>[k(i,{icon:"clear",onClick:o[1]||(o[1]=t=>e.conditions=void 0)})])),default:j((()=>[k("div",B,[(p(!0),m(v,null,f(e.tags,(({entity:t,tag:a,color:o,select:l},s)=>(p(),m("button",{key:t+"--"+a,class:"select-"+l,onClick:t=>e.toggle(s)},[k("span",{class:o},x(a),3)],10,["onClick"])))),128))])])),_:1})}));U.render=M,U.__scopeId="data-v-30afbc72";var T=d({name:"TransitionEditor",components:{VState:n},props:{modelValue:{type:Array,default:void 0},states:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:t}){const a=i({get:()=>e.modelValue,set:e=>t("update:modelValue",e)}),o=i({get:()=>Array.isArray(a.value),set:e=>a.value=e?[]:void 0});return{transition:a,bestOf:o,toggle:function(e){if(!Array.isArray(a.value))return;const t=a.value.indexOf(e);t<0?a.value.push(e):a.value.splice(t,1)}}}});const I={class:"row"},z={key:0,class:"row wrap"};T.render=function(e,o,l,s,n,d){const i=a,r=u("VState"),c=t;return p(),m(c,{icon:"alt_route",header:"transition"},{header:w((()=>[k("div",I,[k(i,{icon:"navigate_next","is-on":!e.bestOf,onClick:o[1]||(o[1]=t=>e.bestOf=!1)},null,8,["is-on"]),k(i,{icon:"star_outline","is-on":e.bestOf,onClick:o[2]||(o[2]=t=>e.bestOf=!0)},null,8,["is-on"])])])),default:w((()=>[e.bestOf?(p(),m("div",z,[(p(!0),m(v,null,f(e.states,((t,a)=>(p(),m("button",{key:a,class:["col","select-"+e.transition.includes(a)],onClick:t=>e.toggle(a)},[k(r,{state:t},null,8,["state"])],10,["onClick"])))),128))])):b("",!0)])),_:1})};var F=d({name:"BlockEditor",components:{ConditionsEditor:U,TransitionEditor:T,VState:n},props:{modelValue:{type:Array,default:void 0}},emits:["update:modelValue"],setup(e,{emit:t}){const a=i({get:()=>e.modelValue,set:e=>t("update:modelValue",e)}),o=g(void 0);return{newState:s,state:o,block:a}}});const G={key:0,class:"block col-2"},H={class:"row wrap"},Q={class:"row"};F.render=function(a,o,l,s,n,d){const i=e,r=u("VState"),c=t,V=u("ConditionsEditor"),y=u("TransitionEditor");return a.block?(p(),m("div",G,[k(c,{icon:"account_tree",header:"States"},{header:w((()=>[k(i,{modelValue:a.block,"onUpdate:modelValue":o[1]||(o[1]=e=>a.block=e),item:a.state,"onUpdate:item":o[2]||(o[2]=e=>a.state=e),add:a.newState,copy:"",shift:"",remove:""},null,8,["modelValue","item","add"])])),default:w((()=>[k("div",H,[(p(!0),m(v,null,f(a.block,((e,t)=>(p(),m("button",{key:t,class:"select-"+(a.state===e),onClick:t=>a.state=e},[k(r,{state:e},null,8,["state"])],10,["onClick"])))),128))])])),_:1}),a.state?(p(),m(v,{key:0},[k(c,{key:Math.random(),icon:"segment",header:"text"},{default:w((()=>[k("div",Q,[C(k("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>a.state.text.plain=e),type:"text",placeholder:"plain"},null,512),[[_,a.state.text.plain]]),C(k("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>a.state.text.ipa=e),class:"text-ipa",type:"text",placeholder:"ipa"},null,512),[[_,a.state.text.ipa]]),C(k("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>a.state.text.glossed=e),type:"text",placeholder:"glossed"},null,512),[[_,a.state.text.glossed]])])])),_:1}),k(V,{modelValue:a.state.conditions,"onUpdate:modelValue":o[6]||(o[6]=e=>a.state.conditions=e)},null,8,["modelValue"]),k(y,{modelValue:a.state.transition,"onUpdate:modelValue":o[7]||(o[7]=e=>a.state.transition=e),states:a.block},null,8,["modelValue","states"])],64)):b("",!0)])):b("",!0)};export{O as _,F as a};
